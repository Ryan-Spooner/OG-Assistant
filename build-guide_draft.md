# Build Guide
Generated by AI. Needs review and testing.

## Step 1: Set Up Twingate Network

1. **Create a Twingate Account**:
   - If you don't have one, sign up for a Twingate account at [Twingate](https://www.twingate.com/).

2. **Create a New Network**:
   - Follow the Twingate setup guide to create a new network.

3. **Add a Connector**:
   - Follow the instructions to add a connector. This involves installing the Twingate Connector on your network. You'll receive a unique token for your connector.

## Step 2: Configure Twingate Connector in Docker

1. **Create Twingate Configuration Files**:
   - Place the `connector.yaml` configuration file that you get from Twingate in your project directory.

2. **Modify Dockerfile to Include Twingate Connector**:
   - Update the Dockerfile to install and configure the Twingate Connector.

```dockerfile
# Use an official Ubuntu base image
FROM ubuntu:latest

# Install dependencies
RUN apt-get update && apt-get install -y \
    wget \
    software-properties-common \
    python3 \
    python3-pip \
    ffmpeg \
    && add-apt-repository -y ppa:obsproject/obs-studio \
    && apt-get update && apt-get install -y obs-studio

# Install OBS WebSocket plugin
RUN wget -O obs-websocket.zip https://github.com/obsproject/obs-websocket/releases/download/4.9.1/obs-websocket-4.9.1-ubuntu20.04.deb \
    && dpkg -i obs-websocket-4.9.1-ubuntu20.04.deb \
    && apt-get install -f

# Install Python dependencies
COPY requirements.txt .
RUN pip3 install -r requirements.txt

# Install Twingate
RUN wget -qO- https://binaries.twingate.com/installer/install.sh | bash

# Copy the Twingate configuration file
COPY connector.yaml /etc/twingate/connector.yaml

# Copy the application code
COPY . /app
WORKDIR /app

# Set the command to run your script and Twingate Connector
CMD ["/app/start.sh"]
```

3. **Create `start.sh` Script**:
   - Create a `start.sh` script to start both the Twingate Connector and your Python script.

```bash
#!/bin/bash

# Start Twingate Connector in the background
/usr/local/bin/twingate-connector start &

# Wait for the Twingate Connector to be ready
sleep 10

# Start your Python script
python3 your_script.py
```

4. **Make `start.sh` Executable**:
   - Ensure the `start.sh` script is executable by adding this to the Dockerfile:

```dockerfile
RUN chmod +x /app/start.sh
```

## Step 3: Build and Run the Docker Container

1. **Build the Docker Image**:
   - Open a terminal and navigate to the directory containing the Dockerfile.
   - Run the following command to build the Docker image:
     ```bash
     docker build -t obs-recorder-twingate .
     ```

2. **Run the Docker Container**:
   - Use the following command to run the Docker container:
     ```bash
     docker run --rm --name obs-recorder-twingate -v /path/to/output:/app/output obs-recorder-twingate
     ```

